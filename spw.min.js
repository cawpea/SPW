var SPW={};SPW.Init=function(t){new SPW.Controller(t)},SPW.Controller=function(t){this.templatePath=t.templatePath,this.index=t.index,this.loader=t.loader,this.init()},SPW.Controller.prototype={init:function(){this.setParameters(),this.bindEvents(),this.updateTemplate()},setParameters:function(){this.$loader=$(this.loader),this.$content=$(".js-spw-content")},bindEvents:function(){var t=this;$("body").on("click",".js-spw-trigger",function(e){e.preventDefault(),t.onClickTrigger($(this))}),$(window).on("popstate",function(e){t.onPopState()})},onClickTrigger:function(t){var e=t.attr("href");this.updateTemplate(e).then(function(){window.history.pushState(null,null,e)})},onPopState:function(){this.updateTemplate(location.pathname)},updateTemplate:function(t){var e=new $.Deferred,n=this;this.showLoader(),t&&"/"!==t||(t=this.index);var i=SPW.Model.getView(t);return i?(this.setTemplate(i),this.hideLoader(),e.resolve()):this.getTemplate(t).then(function(i){SPW.Model.setView(t,i),n.setTemplate(i),n.hideLoader(),e.resolve()}),e.promise()},showLoader:function(){0!==this.$loader.length&&this.$loader.stop().fadeIn()},hideLoader:function(){0!==this.$loader.length&&this.$loader.stop().fadeOut()},resetTemplate:function(){this.$content.empty()},getTemplate:function(t){if(!t)return void console.log("Doesn't definition href property of anchor.");var e=new $.Deferred;return $.ajax({url:this.templatePath+t,type:"GET",dataType:"html"}).then(function(t){var n=$(t),i=n.filter(function(t){return $(n[t]).hasClass("js-spw-template")});e.resolve(i)},function(){e.reject()}),e.promise()},setTemplate:function(t){this.resetTemplate(),this.$content.append(t.hide()),t.fadeIn()}},SPW.Model={setView:function(t,e){this.dataList||(this.dataList={}),this.dataList[t]=e},getView:function(t){if(void 0!==this.dataList)return this.dataList[t]}};
//# sourceMappingURL=spw.min.js.map
