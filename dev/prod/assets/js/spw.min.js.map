{"version":3,"sources":["assets/js/spw.js"],"names":["SPW","Init","parameter","Controller","this","templatePath","index","loader","init","prototype","setParameters","bindEvents","updateTemplate","$loader","$","$content","_this","on","e","preventDefault","onClickTrigger","window","event","onPopState","$target","href","attr","then","history","pushState","location","pathname","d","Deferred","showLoader","$cacheTemplate","Model","getView","setTemplate","hideLoader","resolve","getTemplate","$template","setView","promise","length","stop","fadeIn","fadeOut","resetTemplate","empty","console","log","ajax","url","type","dataType","data","$data","filter","hasClass","reject","append","hide","path","dataList","undefined"],"mappings":"AAAA,GAAIA,OAEJA,KAAIC,KAAO,SAAUC,GACnB,GAAIF,KAAIG,WAAYD,IAGtBF,IAAIG,WAAa,SAAUD,GACzBE,KAAKC,aAAeH,EAAUG,aAC9BD,KAAKE,MAAQJ,EAAUI,MACvBF,KAAKG,OAASL,EAAUK,OACxBH,KAAKI,QAEPR,IAAIG,WAAWM,WACbD,KAAM,WACJJ,KAAKM,gBACLN,KAAKO,aACLP,KAAKQ,kBAEPF,cAAe,WACbN,KAAKS,QAAUC,EAAGV,KAAKG,QACvBH,KAAKW,SAAWD,EAAE,oBAEpBH,WAAY,WACV,GAAIK,GAAQZ,IACZU,GAAE,QAAQG,GAAG,QAAS,kBAAmB,SAASC,GAChDA,EAAEC,iBACFH,EAAMI,eAAgBN,EAAEV,SAE1BU,EAAEO,QAAQJ,GAAG,WAAY,SAASK,GAChCN,EAAMO,gBAGVH,eAAgB,SAAUI,GACxB,GAAIC,GAAOD,EAAQE,KAAK,OACxBtB,MAAKQ,eAAgBa,GAAOE,KAAK,WAC/BN,OAAOO,QAAQC,UAAU,KAAM,KAAMJ,MAGzCF,WAAY,WACVnB,KAAKQ,eAAgBkB,SAASC,WAEhCnB,eAAgB,SAASa,GACvB,GAAIO,GAAI,GAAIlB,GAAEmB,SACVjB,EAAQZ,IAEZA,MAAK8B,aAEAT,GAAiB,MAATA,IACXA,EAAOrB,KAAKE,MAEd,IAAI6B,GAAiBnC,IAAIoC,MAAMC,QAAQZ,EAcvC,OAZIU,IACF/B,KAAKkC,YAAaH,GAClB/B,KAAKmC,aACLP,EAAEQ,WAEFpC,KAAKqC,YAAahB,GAAOE,KAAK,SAASe,GACrC1C,IAAIoC,MAAMO,QAASlB,EAAKiB,GACxB1B,EAAMsB,YAAaI,GACnB1B,EAAMuB,aACNP,EAAEQ,YAGCR,EAAEY,WAEXV,WAAY,WACkB,IAAxB9B,KAAKS,QAAQgC,QAGjBzC,KAAKS,QAAQiC,OAAOC,UAEtBR,WAAY,WACkB,IAAxBnC,KAAKS,QAAQgC,QAGjBzC,KAAKS,QAAQiC,OAAOE,WAEtBC,cAAe,WACb7C,KAAKW,SAASmC,SAEhBT,YAAa,SAAShB,GACpB,IAAKA,EAEH,WADA0B,SAAQC,IAAI,8CAId,IAAIpB,GAAI,GAAIlB,GAAEmB,QAed,OAbAnB,GAAEuC,MACAC,IAAKlD,KAAKC,aAAeoB,EACzB8B,KAAM,MACNC,SAAU,SACT7B,KAAK,SAAS8B,GACf,GAAIC,GAAQ5C,EAAE2C,GACVf,EAAYgB,EAAMC,OAAO,SAASrD,GACpC,MAAOQ,GAAE4C,EAAMpD,IAAQsD,SAAS,oBAElC5B,GAAEQ,QAASE,IACV,WACDV,EAAE6B,WAEG7B,EAAEY,WAEXN,YAAa,SAAUI,GACrBtC,KAAK6C,gBACL7C,KAAKW,SAAS+C,OAAQpB,EAAUqB,QAChCrB,EAAUK,WAId/C,IAAIoC,OACFO,QAAS,SAASqB,EAAMP,GAClBrD,KAAK6D,WACP7D,KAAK6D,aAEP7D,KAAK6D,SAASD,GAAQP,GAExBpB,QAAS,SAAS2B,GAChB,GAAsBE,SAAlB9D,KAAK6D,SAGT,MAAO7D,MAAK6D,SAASD","file":"spw.min.js","sourcesContent":["var SPW = {};\n\nSPW.Init = function( parameter ) {\n  new SPW.Controller( parameter );\n};\n\nSPW.Controller = function( parameter ) {\n  this.templatePath = parameter.templatePath;\n  this.index = parameter.index;\n  this.loader = parameter.loader;\n  this.init();\n};\nSPW.Controller.prototype = {\n  init: function() {\n    this.setParameters();\n    this.bindEvents();\n    this.updateTemplate();\n  },\n  setParameters: function() {\n    this.$loader = $( this.loader );\n    this.$content = $('.js-spw-content');\n  },\n  bindEvents: function() {\n    var _this = this;\n    $('body').on('click', '.js-spw-trigger', function(e) {\n      e.preventDefault();\n      _this.onClickTrigger( $(this) );\n    });\n    $(window).on('popstate', function(event) {\n      _this.onPopState();\n    });\n  },\n  onClickTrigger: function( $target ) {\n    var href = $target.attr('href');\n    this.updateTemplate( href ).then(function() {\n      window.history.pushState(null, null, href);\n    });\n  },\n  onPopState: function() {\n    this.updateTemplate( location.pathname );\n  },\n  updateTemplate: function(href) {\n    var d = new $.Deferred;\n    var _this = this;\n\n    this.showLoader();\n\n    if( !href || href === '/' ) {\n      href = this.index;\n    }\n    var $cacheTemplate = SPW.Model.getView(href);\n\n    if( $cacheTemplate ) {\n      this.setTemplate( $cacheTemplate );\n      this.hideLoader();\n      d.resolve();\n    }else {\n      this.getTemplate( href ).then(function($template) {\n        SPW.Model.setView( href,$template );\n        _this.setTemplate( $template );\n        _this.hideLoader();\n        d.resolve();\n      });\n    }\n    return d.promise();\n  },\n  showLoader: function() {\n    if( this.$loader.length === 0 ) {\n      return;\n    }\n    this.$loader.stop().fadeIn();\n  },\n  hideLoader: function() {\n    if( this.$loader.length === 0 ) {\n      return;\n    }\n    this.$loader.stop().fadeOut();\n  },\n  resetTemplate: function() {\n    this.$content.empty();\n  },\n  getTemplate: function(href) {\n    if( !href ) {\n      console.log('Doesn\\'t definition href property of anchor.');\n      return;\n    }\n\n    var d = new $.Deferred;\n\n    $.ajax({\n      url: this.templatePath + href,\n      type: 'GET',\n      dataType: 'html'\n    }).then(function(data) {\n      var $data = $(data);\n      var $template = $data.filter(function(index) {\n        return $($data[index]).hasClass('js-spw-template');\n      });\n      d.resolve( $template );\n    }, function() {\n      d.reject();\n    });\n    return d.promise();\n  },\n  setTemplate: function( $template ) {\n    this.resetTemplate();\n    this.$content.append( $template.hide() );\n    $template.fadeIn();\n  }\n};\n\nSPW.Model = {\n  setView: function(path, data) {\n    if(!this.dataList) {\n      this.dataList = {};\n    }\n    this.dataList[path] = data;\n  },\n  getView: function(path) {\n    if( this.dataList === undefined ) {\n      return;\n    }\n    return this.dataList[path];\n  }\n};"],"sourceRoot":"SORUCE_DIR"}